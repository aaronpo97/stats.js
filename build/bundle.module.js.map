{"version":3,"file":"bundle.module.js","sources":["../src/StatsPanel.ts","../src/Stats.ts"],"sourcesContent":["class StatsPanel {\n  private min = Infinity;\n  private max = 0;\n  private PIXEL_RATIO = Math.round(window.devicePixelRatio || 1);\n  private WIDTH = 80 * this.PIXEL_RATIO;\n  private HEIGHT = 48 * this.PIXEL_RATIO;\n  private TEXT_X = 3 * this.PIXEL_RATIO;\n  private TEXT_Y = 2 * this.PIXEL_RATIO;\n  private GRAPH_X = 3 * this.PIXEL_RATIO;\n  private GRAPH_Y = 15 * this.PIXEL_RATIO;\n  private GRAPH_WIDTH = 74 * this.PIXEL_RATIO;\n  private GRAPH_HEIGHT = 30 * this.PIXEL_RATIO;\n  private ctx: CanvasRenderingContext2D;\n  private name: string;\n  private bg: string | CanvasGradient | CanvasPattern;\n  private fg: string | CanvasGradient | CanvasPattern;\n\n  dom: HTMLCanvasElement;\n\n  constructor(\n    name: string,\n    fg: string | CanvasGradient | CanvasPattern,\n    bg: string | CanvasGradient | CanvasPattern\n  ) {\n    const canvas = document.createElement('canvas');\n    canvas.width = this.WIDTH;\n    canvas.height = this.HEIGHT;\n    canvas.style.cssText = `\n      width: ${this.WIDTH / this.PIXEL_RATIO}px;\n      height: ${this.HEIGHT / this.PIXEL_RATIO}px;\n    `;\n\n    this.ctx = canvas.getContext('2d')!;\n    this.dom = canvas;\n\n    this.bg = bg;\n    this.fg = fg;\n    this.name = name;\n\n    this.draw();\n  }\n\n  draw() {\n    this.ctx.font = `bold ${9 * this.PIXEL_RATIO}px Helvetica,Arial,sans-serif`;\n    this.ctx.textBaseline = 'top';\n\n    this.ctx.fillStyle = this.bg;\n    this.ctx.fillRect(0, 0, this.WIDTH, this.HEIGHT);\n\n    this.ctx.fillStyle = this.fg;\n    this.ctx.fillText(this.name, this.TEXT_X, this.TEXT_Y);\n    this.ctx.fillRect(\n      this.GRAPH_X,\n      this.GRAPH_Y,\n      this.GRAPH_WIDTH,\n      this.GRAPH_HEIGHT\n    );\n\n    this.ctx.fillStyle = this.bg;\n    this.ctx.globalAlpha = 0.9;\n    this.ctx.fillRect(\n      this.GRAPH_X,\n      this.GRAPH_Y,\n      this.GRAPH_WIDTH,\n      this.GRAPH_HEIGHT\n    );\n  }\n  update(value: number, maxValue: number) {\n    this.min = Math.min(this.min, value);\n    this.max = Math.max(this.max, value);\n\n    this.ctx.fillStyle = this.bg;\n    this.ctx.globalAlpha = 1;\n    this.ctx.fillRect(0, 0, this.WIDTH, this.GRAPH_Y);\n    this.ctx.fillStyle = this.fg;\n    this.ctx.fillText(\n      `${Math.round(value)} ${this.name} (${Math.round(this.min)}-${Math.round(this.max)})`,\n      this.TEXT_X,\n      this.TEXT_Y\n    );\n\n    this.ctx.drawImage(\n      this.dom,\n      this.GRAPH_X + this.PIXEL_RATIO,\n      this.GRAPH_Y,\n      this.GRAPH_WIDTH - this.PIXEL_RATIO,\n      this.GRAPH_HEIGHT,\n      this.GRAPH_X,\n      this.GRAPH_Y,\n      this.GRAPH_WIDTH - this.PIXEL_RATIO,\n      this.GRAPH_HEIGHT\n    );\n\n    this.ctx.fillRect(\n      this.GRAPH_X + this.GRAPH_WIDTH - this.PIXEL_RATIO,\n      this.GRAPH_Y,\n      this.PIXEL_RATIO,\n      this.GRAPH_HEIGHT\n    );\n\n    this.ctx.fillStyle = this.bg;\n    this.ctx.globalAlpha = 0.9;\n    this.ctx.fillRect(\n      this.GRAPH_X + this.GRAPH_WIDTH - this.PIXEL_RATIO,\n      this.GRAPH_Y,\n      this.PIXEL_RATIO,\n      Math.round((1 - value / maxValue) * this.GRAPH_HEIGHT)\n    );\n  }\n}\n\nexport default StatsPanel;\n","/* eslint-disable no-restricted-globals */\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Updated to TypeScript by @aaronpo97\n */\n\nimport StatsPanel from './StatsPanel';\n\nclass Stats {\n  private mode: number;\n  private container: HTMLDivElement;\n  private beginTime: number;\n  private prevTime: number;\n  private frames: number;\n\n  private fpsPanel: StatsPanel;\n  private msPanel: StatsPanel;\n  private memPanel?: StatsPanel;\n\n  public dom: HTMLDivElement;\n  public beginFrames: number | undefined;\n\n  constructor() {\n    this.mode = 0;\n    this.container = document.createElement('div');\n    this.container.addEventListener(\n      'click',\n      (event) => {\n        event.preventDefault();\n        this.mode = (this.mode + 1) % this.container.children.length;\n        this.showPanel(this.mode);\n      },\n      false\n    );\n\n    this.beginTime = (performance || Date).now();\n    this.prevTime = this.beginTime;\n    this.frames = 0;\n    this.fpsPanel = this.addPanel(new StatsPanel('FPS', '#0ff', '#002'));\n    this.msPanel = this.addPanel(new StatsPanel('MS', '#0f0', '#020'));\n\n    if (self.performance && self.performance.memory) {\n      this.memPanel = this.addPanel(new StatsPanel('MB', '#f08', '#201'));\n    }\n\n    this.showPanel(0);\n    this.dom = this.container;\n  }\n\n  public begin() {\n    this.beginTime = (performance || Date).now();\n  }\n\n  public end() {\n    this.frames += 1;\n\n    const time = (performance || Date).now();\n\n    this.msPanel.update(time - this.beginTime, 200);\n\n    if (time >= this.prevTime + 1000) {\n      this.fpsPanel.update((this.frames * 1000) / (time - this.prevTime), 100);\n      this.prevTime = time;\n      this.beginFrames = 0;\n\n      if (this.memPanel && performance.memory) {\n        const { memory } = performance;\n        this.memPanel.update(\n          memory.usedJSHeapSize / 1048576,\n          memory.jsHeapSizeLimit / 1048576\n        );\n      }\n    }\n\n    return time;\n  }\n\n  private showPanel(id: number) {\n    for (let i = 0; i < this.container.children.length; i += 1) {\n      const child = this.container.children[i] as HTMLElement;\n      child.style.display = i === id ? 'block' : 'none';\n    }\n\n    this.mode = id;\n  }\n\n  private addPanel(panel: StatsPanel) {\n    this.container.appendChild(panel.dom);\n    return panel;\n  }\n}\n\nexport default Stats;\n"],"names":[],"mappings":"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"}